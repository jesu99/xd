<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Catálogo de Películas</title>
    <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
    <style>
        body { font-family: Arial, sans-serif; text-align: center; position: relative; }
        .container { max-width: 800px; margin: auto; }
        .movie { cursor: pointer; padding: 10px; border: 1px solid #ddd; margin: 10px; display: flex; align-items: center; }
        .movie img { width: 100px; height: 150px; margin-right: 10px; }
        .movie-details { text-align: left; }
        video { width: 100%; max-width: 800px; }
        #search { margin-bottom: 20px; padding: 10px; width: 100%; max-width: 400px; }
        .error-message { color: red; margin: 20px; }
        .scroll-button { margin: 20px; padding: 10px; background: #007bff; color: white; border: none; cursor: pointer; position: relative; z-index: 1000; }
    </style>
</head>
<body>
    <div class="container">
        <!-- Botón para desplazarse a las películas -->
        <button class="scroll-button" onclick="scrollToMovies()">Ver Películas ↓</button>
        
        <h1>Catálogo de Películas</h1>
        
        <!-- Publicidad de Adsterra -->
        <script type="text/javascript">
            atOptions = {
                'key' : 'b330ccd204185aee9ef640adccf896d2',
                'format' : 'iframe',
                'height' : 90,
                'width' : 728,
                'params' : {}
            };
        </script>
        <script type="text/javascript" src="//www.highperformanceformat.com/b330ccd204185aee9ef640adccf896d2/invoke.js"></script>
        
        <script async="async" data-cfasync="false" src="//pl26063313.effectiveratecpm.com/93/61/3d/93613d042ce505fe468e829efbb21520.js"></script>
        <script async="async" data-cfasync="false" src="//pl26063295.effectiveratecpm.com/2537ae2ea8b16bc9e554273a94dfd098/invoke.js"></script>
        
        <input type="text" id="search" placeholder="Buscar película..." onkeyup="filterMovies()">
        <div id="movie-list"></div>
        <video id="player" controls style="display:none;" crossorigin="anonymous"></video>
        <div id="error-container" class="error-message"></div>
    </div>
    
    <script>
        function scrollToMovies() {
            document.getElementById("movie-list").scrollIntoView({ behavior: "smooth" });
        }

        let adShown = false;

        function showAdBeforePlaying(callback) {
            if (!adShown) {
                adShown = true;
                var adWindow = window.open("https://www.effectiveratecpm.com/wy4ysndt?key=12c98d265ef2e657283053a557f43edd", "_blank", "width=800,height=600");
                setTimeout(() => {
                    if (adWindow && !adWindow.closed) adWindow.close();
                    callback();
                }, 5000);
            } else {
                callback();
            }
        }

        function loadMovies() {
            const movieList = document.getElementById("movie-list");
            movieList.innerHTML = "";
            const movies = [
                { title: "Película 1", image: "https://via.placeholder.com/100x150", url: "https://example.com/movie1.m3u8" },
                { title: "Película 2", image: "https://via.placeholder.com/100x150", url: "https://example.com/movie2.m3u8" }
            ];
            
            movies.forEach(movie => {
                const movieElement = document.createElement("div");
                movieElement.classList.add("movie");
                movieElement.innerHTML = `
                    <img src="${movie.image}" alt="${movie.title}">
                    <div class="movie-details">
                        <h3>${movie.title}</h3>
                    </div>
                `;
                movieElement.addEventListener("click", () => {
                    showAdBeforePlaying(() => playMovie(movie.url));
                });
                movieList.appendChild(movieElement);
            });
        }

        function playMovie(url) {
            const player = document.getElementById('player');
            player.style.display = 'block';
            player.src = url;
            player.play().catch(console.error);
        }

        document.addEventListener("DOMContentLoaded", loadMovies);
    </script>

    <!-- Publicidad flotante -->
    <script async="async" data-cfasync="false" src="//pl26063313.effectiveratecpm.com/ad.js"></script>
</body>
</html>
